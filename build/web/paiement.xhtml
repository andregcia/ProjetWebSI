<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <head>
        <title>Paiement en ligne</title>
    </head>
    <body>
        <f:metadata>
            <f:viewParam name="cC" value="#{paiement.cours.idcours}" />
            <f:viewParam name="cM" value="#{paiement.member.id}" />
            <f:event listener="#{paiement.loadCours()}" type="preRenderView"/>
            <f:event listener="#{paiement.loadMember()}" type="preRenderView"/>
        </f:metadata>
        <ui:composition	template="/WEB-INF/includes/template.xhtml">
            <!-- partie	"htmlHead" du template remplacée par le	fragment suivant -->
            <ui:define name="htmlHead">
                <meta name="description" content="La page d’accueil"/>
                <title>Paiement</title>
            </ui:define>
            <ui:define name="entete">
                <h:outputText value="La Banque !"/>
            </ui:define>
            <ui:define name="main">
                <h:panelGroup rendered="#{not empty connect.member.userName}">
                    <h1>La banque !</h1>
                    <h:panelGroup id="errorCo">
                        <h:outputText value="Procédure du paiement pour : "/>
                        <h:outputText value="#{paiement.cours.title}" style="font-weight: bold;"/>
                        <br/>
                        <h:outputText value="Nous allons procéder au paiement merci de remplir l'ensemble des informations demandées."/>
                    </h:panelGroup>
                    <h:form id="newForm">
                        <h:panelGrid columns="4" >
                            <h:outputText style="font-weight: bold;" value="Prix du cours : "/>
                            <h:outputText style="font-weight: bold;" value="#{paiement.cours.price} €"/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <p:outputLabel value="Nom "/>
                            <p:inputText value="#{connect.member.lastName}" size="16"/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <p:outputLabel value="Mois et année de validité"/>
                            <p:inputText value="#{paiement.mois}" maxlength="2" size="2"/>/<h:inputText value="#{paiement.annee}" maxlength="4" size="4"/>
                            <p:outputLabel value="Numéro de carte"/>
                            <p:inputText value="#{paiement.numCard}" maxlength="16" size="16"/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <p:outputLabel value="Code visuel"/>
                            <p:inputText value="#{paiement.secure}" maxlength="3" size="3"/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <h:outputText value=""/>
                            <h:commandButton value="Payer le cours" action="#{paiement.doTransaction()}" id="msgError"/>
                            <h:outputLabel value=""/>
                            <h:message for="msgError" styleClass="msgError"/>
                        </h:panelGrid>
                    </h:form>
                </h:panelGroup>
                <h:panelGroup rendered="#{empty connect.member.userName}" id="errorDroit">
                    <h:outputText value="Oh !" />
                    <br/>
                    <h:outputText value="Il semblerait que vous n'êtes pas connecté... pensez à vous connecter pour profiter pleinement de vos cours." />
                </h:panelGroup>
            </ui:define>
        </ui:composition>
    </body>
</html>